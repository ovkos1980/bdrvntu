%!TEX root = ../bdr.tex
\chapter[(Довідковий) Приклад додатку з лістингом]{Приклад додатку з лістингом}

\AtBeginEnvironment{minted}{\underonespace}

\begin{minted}{cpp}
#include <cstdlib>
#include <iostream>

struct node_t
 {
   int data;
   node_t *next; //pointer to head
   node_t *prev; /*pointer to tail*/   
 };

node_t *head = NULL, *tail = NULL; 

int add_head(int);
int add_tail(int);
int size_list(void);

int main(int argc, char *argv[])
{
    add_head(1);
    printf("%d\n", size_list());
    add_tail(2);
    printf("%d\n", size_list());
    system("PAUSE");
    return EXIT_SUCCESS;
}

int add_head(int d)
 {
   node_t *tmp = new node_t;
   if(tmp!=NULL)
    {
      tmp->data = d;
      tmp->next = head;
      tmp->prev = NULL;
      if(head!=NULL) head->prev = tmp;
       else if(tail==NULL) tail = tmp;
             else return -1;
      head = tmp;
      return 0;          
    } else return -1;
 }


int add_tail(int d)
 {
   node_t *tmp = new node_t;
   if(tmp!=NULL)
    {
      tmp->data = d;
      tmp->next = NULL;
      tmp->prev = tail;
      if(tail!=NULL) tail->next = tmp;
       else if(head==NULL) head = tmp;
             else return -1;
      tail = tmp;
      return 0;          
    } else return -1;             
 }

int size_list(void)
 {
   if(head!=NULL)
    {
      int num = 0;           
      node_t *tmp = head;
      while(tmp!=NULL)
       {
         tmp = tmp->next;
         num++;            
       }
      return num;            
    } else return 0;
 }

int main(int argc, char *argv[])
{
    add_head(1);
    printf("%d\n", size_list());
    add_tail(2);
    printf("%d\n", size_list());
    system("PAUSE");
    return EXIT_SUCCESS;
}

int add_head(int d)
 {
   node_t *tmp = new node_t;
   if(tmp!=NULL)
    {
      tmp->data = d;
      tmp->next = head;
      tmp->prev = NULL;
      if(head!=NULL) head->prev = tmp;
       else if(tail==NULL) tail = tmp;
             else return -1;
      head = tmp;
      return 0;          
    } else return -1;
 }


int add_tail(int d)
 {
   node_t *tmp = new node_t;
   if(tmp!=NULL)
    {
      tmp->data = d;
      tmp->next = NULL;
      tmp->prev = tail;
      if(tail!=NULL) tail->next = tmp;
       else if(head==NULL) head = tmp;
             else return -1;
      tail = tmp;
      return 0;          
    } else return -1;             
 }

int size_list(void)
 {
   if(head!=NULL)
    {
      int num = 0;           
      node_t *tmp = head;
      while(tmp!=NULL)
       {
         tmp = tmp->next;
         num++;            
       }
      return num;            
    } else return 0;
 }
\end{minted}
